<?php $canManageListSaver = \BackendAuth::userHasAccess('sixgweb.listsaver.manage'); ?>

<ul class="list-unstyled m-0 <?= $canManageListSaver ? 'mt-2' : '' ?>">
    <?php foreach ($listSaverPreferences as $id => $name): ?>
    <li>
        <div class="d-flex g-0 align-items-center">
        <a 
            data-request="onApplyListSaverPreference" 
            data-request-data="list_saver_preference:<?= $id ?>" 
            class="dropdown-item w-100" 
            href="#"><?= $name ?></a>
        <?php if ($canManageListSaver) : ?>
        <a 
            data-request="onDeleteListSaverPreference" 
            data-request-data="list_saver_preference:<?= $id ?>" 
            data-request-confirm="Delete saved list?"
            data-request-success="document.getElementById('listSaverToggle').click();"
            class="dropdown-item px-1 w-auto text-secondary" 
            href="#"><i class="bi-x-circle-fill"></i></a>
        <?php endif; ?>
        </div>
    </li>
    <?php endforeach ?>
</ul>
